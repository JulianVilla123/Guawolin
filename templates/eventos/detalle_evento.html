{% extends 'partials/base.html' %}
{% block title %}Detalle del evento{% endblock %}

{% block content %}
<div class="evento-card">
  <h2>{{ evento.titulo }}</h2>
  <p><strong>Fecha:</strong> {{ evento.fecha|date:"d M Y H:i" }}</p>
  <p><strong>Lugar:</strong> {{ evento.lugar }}</p>

  <h3 class="estado-title"> Estado de boletos</h3>
  <div class="estado-boletos">
    <div class="estado-item">
      <span class="label">Cupo m√°ximo:</span>
      <span class="value">{{ evento.cupo_maximo }}</span>
    </div>
    <div class="estado-item">
      <span class="label">Vendidos:</span>
      <span class="value">{{ boletos_vendidos }}</span>
    </div>
    <div class="estado-item">
      <span class="label">Disponibles:</span>
      <span class="value">{{ boletos_disponibles }}</span>
    </div>
    <div class="estado-item porcentaje">
      <span class="label">Porcentaje vendido:</span>
      <span class="value">{{ porcentaje_vendido|default:0 }}%</span>
    </div>
    <div class="estado-item">
      <span class="label">Ingresos totales:</span>
      <span class="value">${{ ingresos_totales }}</span>
    </div>

    <div class="progress-bar">
      <div class="progress" style="width: {{ porcentaje_vendido|default:0 }}%;"></div>
    </div>
  </div>

  <!-- Botones -->
  <div class="flex justify-between mt-8">
    <a href="{% url 'my_events' %}" 
       class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition">
      ‚Üê Volver
    </a>
    <a href="{% url 'eliminar_evento' evento.id %}" 
       class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition"
       onclick="return confirm('¬øSeguro que quieres eliminar este evento?');">
      üóë Eliminar evento
    </a>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("toggle-btn");
    if (btn) {
      btn.addEventListener("click", function () {
        const ocultos = document.querySelectorAll(".tabla-compradores .oculto");
        const mostrando = ocultos[0].style.display === "table-row";

        if (mostrando) {
          ocultos.forEach(row => row.style.display = "none");
          btn.textContent = "Ver m√°s compradores";
        } else {
          ocultos.forEach(row => row.style.display = "table-row");
          btn.textContent = "Ver menos compradores";
        }
      });
    }
  });
</script>
{% endblock %}
