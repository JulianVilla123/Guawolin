{% extends 'partials/base.html' %}
{% block title %}Gestionar Eventos{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto mt-10 px-4">
  <h2 class="text-3xl font-extrabold text-indigo-700 mb-6">ðŸ“… Eventos registrados</h2>

  <div class="bg-white shadow rounded-lg p-6">
    <!-- Contenedor scroll horizontal en mÃ³viles -->
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">TÃ­tulo</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Organizador</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Fecha del evento</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Estado</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Acciones</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {% for evento in eventos %}
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">{{ evento.titulo }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">{{ evento.organizador.username }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
              {{ evento.fecha|date:"d/m/Y H:i" }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold">
              {% if evento.fecha > now %}
                <span class="text-green-600">Por venir</span>
              {% else %}
                <span class="text-gray-600">Ya pasÃ³</span>
              {% endif %}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <form method="post" action="{% url 'eliminar_evento_admin' evento.id %}" 
                    onsubmit="return confirm('Â¿Seguro que deseas eliminar el evento {{ evento.titulo }}?');">
                {% csrf_token %}
                <button type="submit" class="bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-700 text-sm">
                  Eliminar
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
