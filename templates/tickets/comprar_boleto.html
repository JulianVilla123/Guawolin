{% extends 'partials/base.html' %}
{% block title %}Comprar boletos{% endblock %}

{% block content %}
<div class="compra-wrapper">
  <!-- InformaciÃ³n del evento -->
  <div class="compra-info">
    <h2 class="compra-titulo">ğŸŸï¸ Comprar boletos para <span>{{ evento.titulo }}</span></h2>
    <p><strong>Fecha:</strong> {{ evento.fecha|date:"d M Y H:i" }}</p>
    <p><strong>Lugar:</strong> {{ evento.lugar }}</p>
    <p><strong>Cupo disponible:</strong> {{ evento.cupo_maximo }}</p>
    <p><strong>Precio por boleto:</strong> ${{ evento.precio }}</p>
  </div>

  <!-- Formulario de compra -->
  <form method="post" class="compra-form">
    {% csrf_token %}
    <h3 class="form-titulo">ğŸ§¾ Datos del comprador</h3>
    <div class="form-grid">
      <input type="text" name="nombre" id="nombre" placeholder="Nombre completo" required>
      <input type="email" name="email" id="email" placeholder="Correo electrÃ³nico" required>
      <input type="number" name="cantidad" id="cantidad" min="1" max="{{ evento.cupo_maximo }}" value="1" required>
    </div>

    <h3 class="form-titulo">ğŸ’³ InformaciÃ³n de tarjeta</h3>
    <div class="tarjeta-grid">
      <input type="text" name="banco" id="banco" placeholder="Nombre del banco" required>
      <input type="text" name="tarjeta" id="tarjeta" maxlength="19" placeholder="NÃºmero de tarjeta" required>
      <input type="text" name="expiracion" id="expiracion" placeholder="MM/AA" required>
      <input type="text" name="cvv" id="cvv" maxlength="3" placeholder="CVV" required>
    </div>

    <!-- Tarjeta visual -->
    <div class="tarjeta-visual">
      <div class="card">
        <div class="card-banco" id="preview-banco">BANCO</div>
        <div class="card-number" id="preview-numero">0123 4567 8901 2345</div>
        <div class="card-footer">
          <div class="Titular de la tarjeta" id="preview-nombre">Titular de la tarjeta</div>
          <div class="card-exp" id="preview-exp">MM/YY</div>
          <div class="card-cvv" id="preview-cvv">CVV</div>
        </div>
      </div>
    </div>

    <div class="acciones">
      <button type="submit" class="btn btn-success">âœ… Confirmar compra</button>
      <a href="{% url 'eventos_disponibles' %}" class="btn btn-secondary">âŒ Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
  
  document.getElementById('banco').addEventListener('input', e => {
  document.getElementById('preview-banco').textContent = e.target.value || 'BANK';
});
  document.getElementById('tarjeta').addEventListener('input', e => {
    document.getElementById('preview-numero').textContent = e.target.value || '0123 4567 8901 2345';
  });

  document.getElementById('expiracion').addEventListener('input', e => {
    document.getElementById('preview-exp').textContent = e.target.value || 'MM/YY';
  });

  document.getElementById('cvv').addEventListener('input', e => {
  document.getElementById('preview-cvv').textContent = e.target.value || 'CVV';
});

  document.getElementById('nombre').addEventListener('input', e => {
    document.getElementById('preview-nombre').textContent = e.target.value || 'CARDHOLDER';
  });
</script>
{% endblock %}

